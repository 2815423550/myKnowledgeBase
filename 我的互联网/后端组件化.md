### 分析图片的人数

```
API请求的地址（固定值）：
String url = "https://aip.baidubce.com/rest/2.0/image-classify/v1/body_num";

图片的地址（希望能做成参数形式）：
String filePath = "C:/Users/28154/Downloads/img/111.png";

API功能的access_token，有效期为一个月，过期后需要自行获取
String accessToken = "24.d7ed2f0ac538518bdb1c76580dac0c82.2592000.1650871629.282335-25850307";
获取地址access_token（打开后找到access_token的值并复制）：https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&client_id=rQnLqEeWrWLGOMogFboUYaOg&client_secret=lkpOp1lg6h7LOkx7h2xDpEkOKSw1WCcm&
```

代码：

```java
public String peopleNumber() {
        String url = "https://aip.baidubce.com/rest/2.0/image-classify/v1/body_num";
        try {
            // 本地文件路径（这里写成了固定值，最好还是能做成参数，埋雷）
            String filePath = "C:/Users/28154/Downloads/img/111.png";

            byte[] imgData = FileUtil.readFileByBytes(filePath);
            String imgStr = Base64Util.encode(imgData);
            String imgParam = URLEncoder.encode(imgStr, "UTF-8");
            String param = "image=" + imgParam;
            // 注意这里仅为了简化编码每一次请求都去获取access_token，线上环境access_token有过期时间， 客户端可自行缓存，过期后重新获取。
            String accessToken = "24.d7ed2f0ac538518bdb1c76580dac0c82.2592000.1650871629.282335-25850307";
            String result = HttpUtil.post(url, accessToken, param);
            String substring = result.substring(14, 17);

            return substring;
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }
```



### 1